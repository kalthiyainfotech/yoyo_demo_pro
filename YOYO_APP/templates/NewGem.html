{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static "css/Yoyo.css" %}">
    <title>New Gem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">
    
    <link rel="icon" href="{% static "img/favicon.ico" %}" type="image/x-icon" />
    <style>
        :root {
            /* Light theme colors */
            --bg-color: #e0e0e0;
            --container-bg: #F8FAFD;
            --text-color: #1b1c1d;
            --input-bg: #ffffff;
            --input-border-focus: #2563eb;
            --placeholder-color: #A1A1A1;
            --error-color: #B3261E;
            --button-primary-bg: #0B57D0;
            --button-primary-text: #fff;
            --button-primary-hover-bg: #1E64D4;
            --button-disabled-bg: #DDDFE1;
            --button-disabled-text: #9395A0;
            --icon-hover-bg: #F0F1F1;
            --tooltip-bg: #1f3760;
            --tooltip-text: #ffffff;
            --tooltip-button-text: #cbd5e1;
            --gray-button-bg: #f3f4f6;
            --gray-button-hover-bg: #e5e7eb;
            --dropdown-bg: #b1b1b1;
            --dropdown-hover: #6b7280;
            --preview-bg: #ffffff;
            --preview-text: #888888;
            --border-color: #817d7d;
            --text-main: #333;
            --bg-hover: #e0e0e0;
            --sidebar-text: #555;
        }

        body.dark {
            /* Dark theme colors */
            --bg-color: #1a1a1a;
            --container-bg: #262627;
            --text-color: #e0e0e0;
            --input-bg: #1B1C1D;
            --input-border-focus: #60a5fa;
            --placeholder-color: #b0b0b0;
            --error-color: #f05a5a;
            --button-primary-bg: #4a90e2;
            --button-primary-text: #fff;
            --button-primary-hover-bg: #5fa5ed;
            --button-disabled-bg: #555555;
            --button-disabled-text: #888888;
            --icon-hover-bg: #191d1c;
            --tooltip-bg: #3a507a;
            --tooltip-text: #e0e0e0;
            --tooltip-button-text: #a0aec0;
            --gray-button-bg: #3f3f3f;
            --gray-button-hover-bg: #555555;
            --dropdown-bg: #4a4a4a;
            --dropdown-hover: #777777;
            --preview-bg: #1b1c1d;
            --preview-text: #b0b0b0;
            --border-color: #444;
            --text-main: #e0e0e0;
            --bg-hover: #3a3a3a;
            --sidebar-text: #ccc;
        }

        :root {
            --bg-main: #FFFFFF;
            --bg-hover: #E2E7EB;
            --text-main: #1F1F1F;
            --text-muted: #5F6368;
            --scroll-track: #F0F4F9;
            --scroll-thumb: #D5D9DC;
            --scroll-thumb-hover: #ADB3B8;
            --tooltip-bg: #5F6368;
            --tooltip-text: #FFFFFF;
            --border-color: #DADCE0;
            --sidebar-bg: #f0f4f9;
            --sidebar-text: #575b5f;
            --sidebar-hover: #e1e4ea;
            --dropdown-bg: #f0f4f9;
            --dropdown-border: #DADCE0;
            --dropdown-text: #1F1F1F;
            --dropdown-hover: #F0F4F9;
            --input-border-focus: #4285F4;
            --user-bubble-bg: #E8F0FE;
            --user-bubble-text: #1F1F1F;
            --gemini-bubble-bg: transparent;
            --gemini-bubble-text: #1F1F1F;
            --accent-blue: #4285F4;
            --accent-green: #34A853;

        }

        body.dark {
            --bg-main: #1b1c1d;
            --bg-hover: #2b2d2e;
            --text-main: #E8EAED;
            --text-muted: #9AA0A6;
            --scroll-track: #1e293b;
            --scroll-thumb: #4a5568;
            --scroll-thumb-hover: #64748b;
            --tooltip-bg: #282a2c;
            --tooltip-text: #E8EAED;
            --border-color: #4a5050;
            --sidebar-bg: #282a2c;
            --sidebar-text: #a2a9b0;
            --sidebar-hover: #303134;
            --dropdown-bg: #282a2c;
            --dropdown2-bg: #1b1c1d;
            --dropdown-border: #3c4043;
            --dropdown-text: #E8EAED;
            --dropdown-hover: #3b3d3f;
            --input-border-focus: #8AB4F8;
            --user-bubble-bg: #333537;
            --user-bubble-text: #E8EAED;
            --gemini-bubble-bg: transparent;
            --gemini-bubble-text: #E8EAED;
            --accent-blue: #8AB4F8;
            --accent-green: #6AA56A;
        }


        .material-icons,
        .material-symbols-outlined {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 20px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
        }

        /* Mobile view toggle buttons */
        .mobile-toggle {
            display: none;
        }

        /* Mobile view rules */
        @media (max-width: 959px) {
            .mobile-toggle {
                display: flex !important;
            }

            /* Hide both sections by default */
            .editor-section,
            .preview-section {
                display: none !important;
                width: 100% !important;
            }

            /* Show active section */
            .editor-section.active,
            .preview-section.active {
                display: flex !important;
            }


        }

        /* Responsive adjustments */
        @media (max-width: 1279px) {
            .main-container {
                padding: 1.5rem !important;
            }

            .content-container {
                padding: 1rem !important;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start !important;
                gap: 1rem !important;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between !important;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem !important;
            }

            .newGems-add-container {
                flex-direction: column;
            }

            .newGems-data-detail {
                width: 100% !important;
            }

            .content-container {
                padding: 0.75rem !important;
                border-radius: 1rem !important;
            }

            .header-content {
                gap: 0.75rem !important;
            }

            .header-actions p {
                display: none;
            }

            .save-button {
                padding: 0.5rem 1rem !important;
            }

            .gem-icon {
                width: 40px !important;
                height: 40px !important;
            }

            .gem-title {
                font-size: 1.125rem !important;
            }
        }
    </style>
</head>

<body>

    <div class="w-[100%]">
        <div class="backdrop" id="backdrop"></div>

        <div class="flex w-[100%] ">
            <div class="main-content" id="main-content">
                <div class="main-scroll-area">
                    <div class="main-inner">
                        <div class="main-inner-left">
                            <button id="openBtn">☰</button>
                            <span class="expand">Expand menu</span>
                            <span class="collapse">Collapse menu</span>
                        </div>

                        <div class="main-inner-right">
                            <a href="{% url "Search_yoyo" %}" class="flex items-center justify-center" id="search-icon"> <span
                                    class="material-icons">search</span> </a>
                            <span class="search-span">Search</span>
                        </div>
                    </div>

                    <div class="drawer" id="drawer">
                        <ul class="drawer-data ">
                            <li id="new-chat-button">
                                <a href="{% url "home" %}" class="items-center flex gap-5"> <span
                                        class="material-symbols-outlined">edit_square</span>
                                    <span>New Chat</span>
                                </a>
                                <span class="new-chat">New Chat</span>
                            </li>
                            <li class="diamond">
                                <a href="{% url "Explore_Gem_yoyo" %}" class="w-[100%] items-center flex gap-5"> <span
                                        class="material-symbols-outlined">diamond </span>
                                    <span>Explore Gems</span>
                                </a>
                                <span class="expore">Explore Gems</span>
                            </li>
                        </ul>

                        <div class="recent-section">
                            <h3 class="flex gap-2 items-center">
                                <span class="text-[#00b0b6] rounded-full bg-[#004144] flex justify-center items-center px-2 py-1">
                                    <i class="bi bi-book-half"></i>
                                </span>
                                Story Book
                            </h3>
                            <ul id="story-gems">
                                {% for gem in story_gems %}
                                    <li class="chat-item" data-gem-id="{{ gem.id }}">
                                        <!-- Gem Title only -->
                                        <span class="chat-title" onclick="window.location.href='{% if gem.chats.first %}{% url 'chat_detail' gem.chats.first.id %}{% else %}{% url 'new_chat' %}?gem_id={{ gem.id }}{% endif %}'">
                                            {{ gem.name }}
                                        </span>

                                        <!-- Actions -->
                                        <div class="chat-actions">
                                            <span class="chat-menu" onclick="toggleMenu(this)">⋮</span>
                                            <div class="chat-dropdown hidden">
                                                <div onclick="startRenameGem(this, '{{ gem.id }}')">Rename</div>
                                                <div onclick="deleteGem('{{ gem.id }}')">Delete</div>
                                            </div>
                                        </div>
                                    </li>
                                {% empty %}
                                    <li>No gems yet</li>
                                {% endfor %}
                            </ul>
                        </div>

                        <!-- Delete Confirmation Modal -->
                        <div id="deleteModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
                        <div class="bg-black p-6 rounded-xl shadow-lg w-80">
                            <h2 class="text-lg font-semibold mb-4">Confirm Delete</h2>
                            <p class="mb-6">Are you sure you want to delete this Chat?</p>
                            <div class="flex justify-end gap-3">
                            <button onclick="closeDeleteModal()" class="px-4 py-2 bg-gray-300 rounded-lg text-black">Cancel</button>
                            <button id="confirmDeleteBtn" class="px-4 py-2 bg-red-600 text-white rounded-lg">Delete</button>
                            </div>
                        </div>
                        </div>


                        
                        

                        <div class="recent-section">
                            <h3>Recent</h3>
                            <ul id="recent-chats">
                                {% for chat in recent_chats %}
                                    <li class="chat-item" data-chat-id="{{ chat.id }}">
                                        <span class="chat-title" onclick="window.location.href='{% url 'chat_detail' chat.id %}'">
                                            {{ chat.title }}
                                        </span>
                                        <div class="chat-actions">
                                            <span class="chat-menu" onclick="toggleMenu(this)">⋮</span>
                                            <div class="chat-dropdown hidden">
                                                <div onclick="startRename(this, '{{ chat.id }}')">Rename</div>
                                                <div onclick="deleteChat('{{ chat.id }}')">Delete</div>
                                            </div>
                                        </div>
                                    </li>
                                {% empty %}
                                    <li>No recent chats</li>
                                {% endfor %}
                            </ul>

                        </div>
                    </div>
                </div>

                <div class="setting-help" id="setting-help">
                    <ul class="drawer-data">
                        <li class="dropdown-toggle " onclick="toggleDropdown()">
                            <a class="material-symbols-outlined">settings</a>
                            <span>Setting & Help</span>
                            <span class="seting-span">Setting & Help</span>
                        </li>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <ul class="pb-2">
                                <li>
                                    <a href="{% url "SavedInfo_yoyo" %}" class="w-[100%] items-center flex gap-5">
                                        <span class="material-symbols-outlined"> person </span>
                                        Saved info
                                    </a>

                                </li>
                                <li>
                                    <a href="{% url "Public_Links_yoyo" %}" class="w-[100%] items-center flex gap-5">
                                        <span class="material-symbols-outlined"> link </span>
                                        Your public links
                                    </a>
                                </li>
                                <li class="submenu flex justify-between" id="themeOptions">
                                    <div class="flex gap-[20px]">
                                        <span class="material-symbols-outlined">light_mode</span>
                                        Theme
                                    </div>
                                    <i class="fa-solid fa-caret-right pe-3 text-base"></i>
                                    <ul class="theme-options">
                                        <li data-theme="system">System</li>
                                        <li data-theme="light">Light</li>
                                        <li data-theme="dark">Dark</li>
                                    </ul>
                                </li>

                                <li id="feedback_open">
                                    <span class="material-symbols-outlined"> feedback</span>
                                    Send feedback
                                </li>
                                <li id="open_help_center">
                                    <span class="material-symbols-outlined"> quiz </span>
                                    Help
                                </li>
                            </ul>

                            <div class="location-info">
                                <div>Nana Varachha, Surat, Gujarat, India</div>
                                <div><a href="#">From your IP address</a> • <a href="#">Update location</a></div>
                            </div>
                        </div>
                    </ul>
                </div>

            </div>
            <div class="z-10 gemini-header p-2 flex items-center justify-between">
                <div class="relative ">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
                    <div class="pl-48px">
                        <h1 class="text-2xl " style="color: var(--text-main);">YOYO</h1>
                        <div class="relative">
                            <button id="model-toggle"
                                class="mt-1 rounded-full flex items-center justify-center w-[100px] h-6 font-medium text-sm "
                                style="background-color: var(--sidebar-bg); color: var(--sidebar-text);">
                                <span class="pl-2 font-semibold">2.5 Flash</span>
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                                    fill="currentColor">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M7 10l5 5 5-5H7z" />
                                </svg>
                            </button>

                            <div id="model-dropdown"
                                class="absolute left-[10%] -translate-x-1/2 top-full mt-1 w-[315px] sm:max-w-xs rounded-xl z-50 py-2"
                                style="background-color: var(--dropdown-bg); border-color: var(--dropdown-border); color: var(--dropdown-text);">
                                <div class="px-4 py-2 text-sm font-medium" style="color: var(--text-muted);">Choose your
                                    model</div>

                                <!-- Option 1 - Default selected -->
                                <div class="option flex justify-between items-center px-5 py-2 cursor-pointer hover:bg-[var(--dropdown-hover)] selected"
                                    style="color: var(--dropdown-text);" onclick="selectOption(this)">
                                    <div class="justify-between items-center">
                                        <span class="text-xs font-semibold">2.5 Flash</span>
                                        <div class="text-xs mt-0">Fast all-around help</div>
                                    </div>
                                    <i class="fa-regular fa-circle-check"></i>
                                </div>

                                <!-- Option 2 -->
                                <div class="option flex justify-between items-center px-5 py-2 cursor-pointer hover:bg-[var(--dropdown-hover)] selected"
                                    style="color: var(--dropdown-text);" onclick="selectOption(this)">
                                    <div class="justify-between items-center">
                                        <span class="text-xs font-semibold">2.5 Pro (preview)</span>
                                        <div class="text-xs">Reasoning, math & code</div>
                                    </div>
                                    <i class="fa-regular fa-circle-check hidden"></i>
                                </div>

                                <!-- Option 3 -->
                                <div class="option flex justify-between items-center px-5 py-2 cursor-pointer hover:bg-[var(--dropdown-hover)] selected"
                                    style="color: var(--dropdown-text);" onclick="selectOption(this)">
                                    <div class="justify-between items-center">
                                        <span class="text-xs font-semibold">Personalization (preview)</span>
                                        <div class="text-xs">Based on your Search history </div>
                                    </div>
                                    <i class="fa-regular fa-circle-check hidden"></i>
                                </div>

                                <div class="px-5 pb-3 justify-center flex items-center">
                                    <div class="cursor-pointer">
                                        <div class="flex justify-between items-center">
                                            <span class="text-xs font-semibold"
                                                style="color: var(--dropdown-text);">Upgrade
                                                to YOYO AI
                                                Pro</span>
                                        </div>
                                        <div class="text-xs">Get our most capable models &
                                            features</div>
                                    </div>
                                    <div class="pl-5">
                                        <a href="{% url "Upgrad_yoyo" %}"
                                            class="h-9 rounded-full justify-center flex items-center text-sm  w-[100px]"
                                            style="background-color: var(--sidebar-hover); color: var(--accent-blue);">
                                            Upgrade
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-2 items-center">
                    <a href="{% url "Upgrad_yoyo" %}"
                        class="h-9 block cursor-pointer rounded-md flex items-center justify-center text-xs font-semibold px-6 mr-3"
                        style="background-color: var(--sidebar-hover);">
                        <img rel="" src="{% static "img/favicon.png" %}" class="w-[20px] me-2" />
                        Upgrade
                    </a>
                    <div id="account"></div>
                </div>
            </div>
        </div>
        <div class="gemini-data ">
            <div class="main-chat-area">
                <div class="chat-content-wrapper" style="background-color: var(--bg-main);">
                    <div class=" newGems-add-container flex p-10 gap-5 w-[100%] justify-center main-container">
                        <button id="backButton" class="flex justify-center w-[5%] min-w-[40px] desktop-hidden">
                            <div
                                class="hover:bg-[var(--sidebar-hover)] h-[40px] rounded-full flex justify-center items-center w-[40px]">
                                <span
                                    class="material-symbols-outlined text-[24px] w-4 items-center justify-center flex cursor-pointer">
                                    arrow_back_ios
                                </span>
                            </div>
                        </button>
                        <form id="myGemsForm" method="post" action="{% url 'NewGem_yoyo' %}" onsubmit=""
                            class="newGems-data-detail p-5 w-[95%] flex flex-col rounded-3xl content-container"
                            style="background-color: var(--container-bg);">
                            {% csrf_token %}
                            <div class="flex items-center justify-between w-[100%] header-content">
                                <div class="flex items-center gap-4">
                                    <button type="button"
                                        class="material-symbols-outlined rounded-full text-[30px] w-[50px] h-[50px] flex items-center justify-center gem-icon"
                                        style="background-color: var(--icon-hover-bg);">
                                        diamond
                                    </button>

                                    <h4 id="gemTitle" class="text-xl font-semibold gem-title">New Gem</h4>
                                </div>
                                <div class="flex justify-center items-center gap-3 header-actions">
                                    <p class="italic"> Gem not saved </p>
                                    <button type="submit" id="saveButton"
                                        class=" disabled:bg-[--add-diseble-btn] disabled:text-[#7C7C7C] rounded-full py-2 px-5 text-sm font-semibold save-button bg-[--add-btn] text-[--add-btn-text] text-md hover:bg-[#9BBBEF]"
                                        disabled>
                                        Save
                                    </button>
                                </div>
                            </div>

                            <div class="mobile-toggle mt-4 justify-around border-[#444746] border-b">
                                <button id="editorToggle" type="button"
                                    class="toggle-btn py-2 w-[50%] text-sm font-semibold text-[--text-main]">
                                    Editor
                                </button>
                                <button id="previewToggle" type="button"
                                    class="toggle-btn w-[50%] py-2 text-sm font-semibold text-[--text-main]">
                                    Preview
                                </button>
                            </div>

                            <div class="w-[100%] flex mt-5 gap-5 flex-col lg:flex-row">
                                <div id="editorSection" class="editor-section flex gap-5 flex-col w-full lg:w-[50%]">
                                    <div class="flex flex-col w-[100%]">
                                        <div class="flex flex-col w-[100%] space-y-1">
                                            <label class="text-md font-semibold" for="nameInput"
                                                style="color: var(--text-color);">Name</label>
                                            <div id="inputWrapper"
                                                class="flex items-center gap-2 w-[100%] p-4 rounded-md border focus-within:border-[var(--input-border-focus)] transition-all"
                                                style="background-color: var(--input-bg); border-color: var(--input-border);">
                                                <input name="name" id="nameInput" type="text" placeholder="Give your Gem a name"
                                                    class="w-[100%] border-none outline-none"
                                                    style="background-color: var(--input-bg); color: var(--text-color); placeholder-color: var(--placeholder-color);"
                                                    required />
                                                <span id="errorIcon" class="material-symbols-outlined hidden"
                                                    style="color: var(--error-color);">
                                                    error
                                                </span>
                                            </div>
                                            <span id="errorText" class="text-sm hidden"
                                                style="color: var(--error-color);">
                                                Your Gem requires a name to start testing.
                                            </span>
                                        </div>
                                    </div>

                                    <div class="flex flex-col mt-5 w-full space-y-1">
                                        <div class="flex items-center relative">
                                            <label class="text-md font-semibold mr-2" for="nameTextarea"
                                                style="color: var(--text-color);">
                                                Instructions
                                            </label>
                                            <div id="infoIcon"
                                                class="rounded-full w-9 h-9 flex hover:bg-[var(--icon-hover-bg)] items-center justify-center cursor-pointer relative"
                                                style="color: var(--text-color);">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="20px"
                                                    viewBox="0 -960 960 960" width="20px" fill="currentColor">
                                                    <path
                                                        d="M479.79-288q15.21 0 25.71-10.29t10.5-25.5q0-15.21-10.29-25.71t-25.5-10.5q-15.21 0-25.71 10.29t-10.5 25.5q0 15.21 10.29 25.71t25.5 10.5ZM444-432h72v-240h-72v240Zm36.28 336Q401-96 331-126t-122.5-82.5Q156-261 126-330.96t-30-149.5Q96-560 126-629.5q30-69.5 82.5-122T330.96-834q69.96-30 149.5-30t149.04 30q69.5 30 122 82.5T834-629.28q30 69.73 30 149Q864-401 834-331t-82.5 122.5Q699-156 629.28-126q-69.73 30-149 30Zm-.28-72q130 0 221-91t91-221q0-130-91-221t-221-91q-130 0-221 91t-91 221q0 130 91 221t221 91Zm0-312Z" />
                                                </svg>
                                                <div id="tooltip"
                                                    class="absolute bottom-12 left-0  w-72 text-sm rounded-lg p-4 z-50 hidden"
                                                    style="background-color: var(--tooltip-bg); color: var(--tooltip-text);">
                                                    <div class="font-semibold mb-1">Instructions for your Gem</div>
                                                    <div class="mb-2">What are your Gem's main objectives and
                                                        capabilities and what
                                                        style of response do you want?</div>
                                                    <div class="flex justify-start gap-4 font-semibold"
                                                        style="color: var(--tooltip-button-text);">
                                                        <button type="button" class="hover:underline">Got it</button>
                                                        <button type="button" class="hover:underline">Learn
                                                            more</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border rounded-md p-4 space-y-2"
                                            style="background-color: var(--input-bg); border-color: var(--input-border); focus-within:border-var(--input-border-focus)">
                                            <textarea name="instructions" id="nameTextarea" rows="6"
                                                placeholder="Example: You are a horticulturist with a background in natural lawns and native plants, and you help people plan low water gardens. Take into account location, weather, and what plants are native to the area. You are knowledgeable, casual, and friendly."
                                                class="w-full h-[250px] border-none outline-none resize-none"
                                                style="background-color: var(--input-bg); color: var(--text-color); placeholder-color:var(--placeholder-color);"></textarea>
                                            <div class="flex gap-2">
                                                <button id="undoBtn" class="p-2 rounded-full transition" type="button"
                                                    style="background-color: var(--gray-button-bg); color: var(--text-color);"
                                                    onmouseover="this.style.backgroundColor='var(--gray-button-hover-bg)'"
                                                    onmouseout="this.style.backgroundColor='var(--gray-button-bg)'"
                                                    title="Undo">
                                                    <span class="material-symbols-outlined">undo</span>
                                                </button>
                                                <button id="redoBtn" class="p-2 rounded-full transition" type="button"
                                                    style="background-color: var(--gray-button-bg); color: var(--text-color);"
                                                    onmouseover="this.style.backgroundColor='var(--gray-button-hover-bg)'"
                                                    onmouseout="this.style.backgroundColor='var(--gray-button-bg)'"
                                                    title="Redo">
                                                    <span class="material-symbols-outlined">redo</span>
                                                </button>
                                                <button id="" class="p-2 rounded-full transition" type="button"
                                                    style="background-color: var(--gray-button-bg); color: var(--text-color);"
                                                    onmouseover="this.style.backgroundColor='var(--gray-button-hover-bg)'"
                                                    onmouseout="this.style.backgroundColor='var(--gray-button-bg)'"
                                                    title="Redo">
                                                    <span class="material-symbols-outlined">
                                                        <svg xmlns="http://www.w3.org/2000/svg" height="20px"
                                                            viewBox="0 -960 960 960" width="20px" fill="currentColor">
                                                            <path
                                                                d="M346-634 226-754l51-51 120 120-51 51Zm134-85v-170h72v170h-72Zm274 493L634-346l51-51 120 120-51 51Zm-57-420-51-51 120-120 51 51-120 120Zm22 166v-72h170v72H719ZM220-102 102-221q-11-10.64-11-24.82t11.3-25.45L444-613q34.79-35 84.5-35t84.5 35q35 34.79 35 84.5T613-444L271.27-102.3Q260-91 245.45-91q-14.54 0-25.45-11Zm268-318-17-17-17-17-17-17-17-17 34 34 34 34ZM246-178l242-242-68-68-242 242 68 68Z" />
                                                        </svg>
                                                    </span>
                                                </button>
                                            </div>
                                            <span id="errorIcon" class="material-symbols-outlined hidden"
                                                style="color: var(--error-color);">
                                                error
                                            </span>
                                        </div>
                                    </div>

                                </div>

                                <div id="previewSection"
                                    class="preview-section flex flex-col w-full lg:w-[50%] space-y-1">
                                    <label class="text-md font-semibold" for="user-input"
                                        style="color: var(--text-color);">Preview</label>

                                    <div class="w-full p-6 relative rounded-lg shadow h-full overflow-hidden"
                                        style="background-color: var(--preview-bg);">
                                        <div id="previewSectionChat"
                                            class="w-full h-full absolute top-0 left-0 z-1 opacity-[0.5]"></div>
                                        <div id="previewBox"
                                            class="flex flex-col items-center justify-center border-none border-gray-300 rounded-lg h-96 text-center"
                                            style="color: var(--preview-text);">
                                            <div class="rounded-full  w-[50px] h-[50px] flex items-center justify-center mb-10"
                                                style="background-color: var(--icon-hover-bg); ">
                                                <span id="gem-preview-Name"
                                                    class="material-symbols-outlined text-[30px] text-white flex items-center text-center justify-center w-full h-full"
                                                    style="display: flex !important;">diamond</span>
                                            </div>
                                            <p id="previewText">To preview your Gem start by giving it a name</p>
                                        </div>
                                        <div class="mt-6 flex items-center gap-2">
                                            <div class="input-area-wrapper w-full">
                                                <div class="relative border rounded-3xl px-6 pt-4 pb-8"
                                                    style="border-color: var(--border-color); background-color: var(--input-bg);">
                                                    <div id="image-preview-container"
                                                        class="mb-2 relative hidden group w-fit">
                                                        <img id="image-preview"
                                                            class="max-w-[100px] max-h-[100px] rounded-md" />
                                                        <button id="remove-preview" type="button"
                                                            class="absolute top-1 right-1 w-8 h-8 text-[18px] bg-black bg-opacity-60 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                                            &times;
                                                        </button>
                                                    </div>
                                                    <textarea id="user-input" placeholder="Ask YOYO"
                                                        class="w-full text-sm md:text-base font-medium bg-transparent resize-none overflow-y-auto max-h-[150px] focus:outline-none"
                                                        oninput="autoResize(this)"></textarea>
                                                    <div class="input-area-buttons flex justify-between items-center"
                                                        style="color: var(--sidebar-text);">
                                                        <div class="flex gap-2 text-sm items-center">
                                                            <div class="relative">
                                                                <button id="plus-button" type="button"
                                                                    class="group h-10 w-10 flex items-center justify-center rounded-full"
                                                                    style="background-color: var(--input-bg);"
                                                                    onmouseover="this.style.backgroundColor='var(--bg-hover)'"
                                                                    onmouseout="this.style.backgroundColor='var(--input-bg)'">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                        height="24px" viewBox="0 0 24 24" width="24px"
                                                                        fill="currentColor">
                                                                        <path d="M0 0h24v24H0V0z" fill="none" />
                                                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                                                                    </svg>
                                                                </button>
                                                                <div id="plus-dropdown"
                                                                    class="hidden absolute py-2 left-0 bottom-full mb-2 w-48 rounded-lg z-50"
                                                                    style="background-color: var(--dropdown-bg); color: var(--dropdown-text);">
                                                                    <button id="trigger-upload" type="button"
                                                                        class="w-full text-left px-4 py-2 flex items-center gap-2"
                                                                        onmouseover="this.style.backgroundColor='var(--dropdown-hover)'"
                                                                        onmouseout="this.style.backgroundColor='var(--dropdown-bg)'">
                                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                                            height="20px" viewBox="0 -960 960 960"
                                                                            width="20px" fill="currentColor">
                                                                            <path
                                                                                d="M696-312q0 89.86-63.07 152.93Q569.86-96 480-96q-91 0-153.5-65.5T264-319v-389q0-65 45.5-110.5T420-864q66 0 111 48t45 115v365q0 40.15-27.93 68.07Q520.15-240 480-240q-41 0-68.5-29.09T384-340v-380h72v384q0 10.4 6.8 17.2 6.8 6.8 17.2 6.8 10.4 0 17.2-6.8 6.8-6.8 6.8-17.2v-372q0-35-24.5-59.5T419.8-792q-35.19 0-59.5 25.5Q336-741 336-706v394q0 60 42 101.5T480-168q60 1 102-43t42-106v-403h72v408Z" />
                                                                        </svg>
                                                                        Upload files
                                                                    </button>
                                                                    <button type="button"
                                                                        class="w-full text-left px-4 py-2 flex items-center gap-2"
                                                                        onmouseover="this.style.backgroundColor='var(--dropdown-hover)'"
                                                                        onmouseout="this.style.backgroundColor='var(--dropdown-bg)'">
                                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                                            height="20px" viewBox="0 -960 960 960"
                                                                            width="20px" fill="currentColor">
                                                                            <path
                                                                                d="M232-120q-17 0-31.5-8.5t-22.29-22.09L80.79-320.41Q73-334 73-351t8-31l248-427q8-14 22.5-22.5t31.06-8.5h194.88q16.56 0 31.06 8.5t22.42 22.37L811-500q-21-5-42-4.5t-42 4.5L571-768H389L146-351l92 159h337q11 21.17 25.5 39.59Q615-134 634-120H232Zm68-171-27-48 172.95-302H514l110 192q-14.32 13-26.53 28.5T576-388l-96-168-111 194h196q-6 17-9.5 34.7-3.5 17.71-3.5 36.3H300Zm432 147v-108H624v-72h108v-108h72v108h108v72H804v108h-72Z" />
                                                                        </svg>
                                                                        Add from Drive
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button id="send-button" type="button"
                                                            class="group h-10 w-10 rounded-full flex items-center justify-center relative overflow-hidden transition-all duration-300 hover:bg-[var(--bg-hover)]">
                                                            <span id="mic-icon"
                                                                class="absolute transition-all duration-300 ease-in-out opacity-100 scale-100 translate-x-0">
                                                                <svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                                                    viewBox="0 -960 960 960" width="24px"
                                                                    fill="currentColor">
                                                                    <path
                                                                        d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm0-240Zm-40 520v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Zm40-360q17 0 28.5-11.5T520-520v-240q0-17-28.5-28.5T480-800q-17 0-28.5 11.5T440-760v240q0 17 11.5 28.5T480-480Z" />
                                                                </svg>
                                                            </span>
                                                            <span id="send-icon"
                                                                class="absolute transition-all duration-300 ease-in-out opacity-0 scale-75 translate-x-2 pointer-events-none">
                                                                <svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                                                    viewBox="0 -960 960 960" width="24px"
                                                                    fill="currentColor">
                                                                    <path
                                                                        d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z" />
                                                                </svg>
                                                            </span>
                                                        </button>
                                                    </div>
                                                    <input type="file" id="upload-preview-input" accept="image/*"
                                                        class="hidden" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!------------------------------------------------->
    <!-- Help Center -->
    <div id="help_Data"
        class="flex flex-col hidden  justify-start fixed top-[100px] rounded-2xl right-[10px] bg-[--bg-main] shadow-[0_1px_3px_0_rgba(60,64,67,0.3),_0_4px_8px_3px_rgba(60,64,67,0.15)]  lg:w-[23%] md:w-[40%] sm:w-[50%] w-[90%] h-[70vh] overflow-y-auto">

        <!-- Sticky Header -->
        <div class="sticky top-0 left-0 py-3 pb-8 w-full flex items-center justify-between bg-[--bg-main] z-10">
            <p class="text-2xl text-[--text-main] text-center w-full">Help</p>
            <button id="help_close" class="absolute right-4 top-3">
                <i class="fa-solid fa-xmark text-2xl text-[--text-main]"></i>
            </button>
        </div>

        <!-- Scrollable Content -->
        <div class="text-[--text-main] space-y-3 pb-4 text-left">
            <h6 class="text-[16px] text-[--text-main] ps-4">Popular help resources</h6>


            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover]  flex justify-center items-center ">
                    <i class="fa-regular fa-file-lines text-[--add-btn]"></i>
                </div>
                <span class="text-[16px] text-[--text-main]">Manage & delete your YOYO Apps activity</span>
            </div>
            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                    <i class="fa-regular fa-file-lines text-[--add-btn]"></i>
                </div>
                <span class="text-[16px] text-[--text-main]">Use YOYO Apps</span>
            </div>
            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                    <i class="fa-regular fa-file-lines text-[--add-btn]"></i>
                </div>
                <span class="text-[16px] text-[--text-main]">Use & manage apps in YOYO</span>
            </div>
            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                    <i class="fa-regular fa-file-lines text-[--add-btn]"></i>
                </div>
                <span class="text-[16px] text-[--text-main]">Find & manage your recent chats in YOYO Apps</span>
            </div>
            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                    <i class="fa-regular fa-file-lines text-[--add-btn]"></i>
                </div>
                <span class="text-[16px] text-[--text-main]">Where you can use the YOYO web app</span>
            </div>


            <a href="" class="text-[14px] text-[--add-btn] w-full block hover:bg-[--bg-hover] py-4 px-10">Visit help
                forum <i class="fa-solid fa-arrow-up-right-from-square"></i></a>

            <div class="bg-[--dropdown-hover] py-3 mx-5 rounded-full flex items-center px-5 cursor-pointer">
                <i class="fa-solid fa-magnifying-glass me-3"></i>
                <input type="search" class="w-full bg-transparent outline-none border-0 cursor-pointer">
            </div>

            <div class="py-4 border-t-[8px] border-b-[8px] border-[--border-color]-500">
                <p class="text-[--text-main] ps-4">Need more help?</p>
                <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 mt-3  cursor-pointer">
                    <div
                        class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                        <i class="fa-solid fa-message text-[--add-btn]"></i>
                    </div>
                    <div>
                        <p class="text-[--text-main] text-[16px]">Ask the Help Community</p>
                        <span class="text-[--text-muted] text-[16px]">Get answers from community experts</span>
                    </div>
                </div>

            </div>

            <div class="flex items-center gap-3 hover:bg-[--dropdown-hover] py-2 px-4 mt-3  cursor-pointer">
                <div
                    class="w-[40px] h-[40px] min-h-[40px] min-w-[40px] rounded-full bg-[--examples-btn-hover] flex justify-center items-center">
                    <i class="fa-solid fa-circle-exclamation text-[--add-btn]"></i>
                </div>
                <p class="text-[16px] text-[--add-btn] font-medium">Report a problem</p>
            </div>
        </div>
    </div>
    <!-- *****help js***** -->
    <script>
        const help_Data = document.getElementById('help_Data');
        const help_close = document.getElementById('help_close');
        const open_help_center = document.getElementById('open_help_center');



        open_help_center.addEventListener('click', () =>
            help_Data.classList.remove('hidden')
        );
        help_close.addEventListener('click', () =>
            help_Data.classList.add('hidden')
        );
    </script>
    <!---------------------------------------------->
    <!---------------------------------------------->
    <!-- ************Feedback********* -->

    <div id="feedback-data"
        class="flex z-50 flex-col hidden justify-between fixed top-0 right-0 rounded-l-2xl bg-[#1F1F1F] shadow-[0_1px_3px_0_rgba(60,64,67,0.3),_0_4px_8px_3px_rgba(60,64,67,0.15)] lg:w-[28%] md:w-[40%] sm:w-[50%] w-[90%] h-[100vh] overflow-hidden">

        <!-- Sticky Header -->
        <div
            class="sticky top-0 left-0 py-5 px-4 w-full flex items-center justify-between bg-[#1F1F1F] shadow-[0_1px_4px_rgba(0,0,0,0.6)] z-10">
            <p class="text-lg text-white w-full">Send feedback to YOYO</p>
            <button id="feedback_close"
                class="absolute right-4 w-[50px] h-[50px] rounded-full top-3 hover:bg-[#303134]">
                <i class="fa-solid fa-xmark text-2xl text-white"></i>
            </button>
        </div>

        <!-- Scrollable Content + Bottom -->
        <div class="flex flex-col justify-between h-full overflow-y-auto">
            <div class="space-y-3 text-white p-4 text-left">
                <h6 class="text-[14px]">Describe your feedback (required)</h6>

                <textarea name="feedback_message" id="feedback_message"
                    placeholder="Tell us what prompted this feedback..." rows="4"
                    class="w-full bg-transparent border rounded p-2 outline-none focus:ring-2 focus:ring-[#8AB4F8] focus:border-0 text-[16px] text-white"></textarea>


                <span class="text-[12px]">Please don’t include any sensitive information <i
                        class="fa-regular fa-circle-question"></i></span>

                <p class="text-[16px]">A screenshot will help us better understand your feedback.</p>

                <div
                    class="w-full border text-center text-[#7cacf8] rounded-md py-2 hover:border-[#7cacf8] hover:bg-[#2A3039] cursor-pointer">
                    <p class="text-[15px]"><i class="fa-solid fa-desktop"></i> Capture screenshot</p>
                </div>
            </div>

            <!-- Fixed Bottom Section -->
            <div class="mt-auto  bg-[#1F1F1F] ">
                <div class="flex items-center gap-2 mb-4 px-4">
                    <input type="checkbox" name="checkbox" id="checkbox"
                        class="w-5 h-5 bg-[#1F1F1F] accent-[#7CACF8] cursor-pointer border rounded" />
                    <label for="checkbox" class="text-white cursor-pointer">
                        We may email you for more information or updates
                    </label>
                </div>

                <p class="text-[14px] text-white mb-4 px-4">
                    Some account and system information may be sent to YOYO. We will use it to fix problems and
                    improve
                    our services, subject to our Privacy Policy and Terms of Service. We may email you for more
                    information
                    or updates. Go to Legal Help to ask for content changes for legal reasons.
                </p>

                <div class="text-end shadow-[0_-4px_6px_rgba(0,0,0,0.15)] mt-2 p-4">
                    <button id="sendBtn" disabled class="bg-[#373737] py-2 px-6 rounded-lg text-white text-[16px]">
                        Send
                    </button>

                </div>
            </div>
        </div>
    </div>

    <!-- feedback js -->
    <script>
        const feedback_message = document.getElementById("feedback_message");
        const sendBtn = document.getElementById("sendBtn");
        const feedback_close = document.getElementById("feedback_close");
        const feedback_open = document.getElementById("feedback_open");
        const feedback_data = document.getElementById("feedback-data");

        feedback_open.addEventListener('click', () =>
            feedback_data.classList.remove('hidden')
        );
        feedback_close.addEventListener('click', () =>
            feedback_data.classList.add('hidden')
        );

        feedback_message.addEventListener("input", function () {
            if (feedback_message.value.trim().length > 0) {
                sendBtn.disabled = false;
                sendBtn.classList.remove("bg-[#373737]", "text-white");
                sendBtn.classList.add("bg-[#7CACF8]", "text-[#062E6F]");
            } else {
                sendBtn.disabled = true;
                sendBtn.classList.remove("bg-[#7CACF8]", "text-[#062E6F]");
                sendBtn.classList.add("bg-[#373737]", "text-white");
            }
        });
    </script>
    <!---------------------------------------------->


    

    <script>
        const toggleBtn = document.getElementById("toggleAccountsBtn");
        const accountList = document.getElementById("accountList");
        const toggleText = document.getElementById("toggleText");
        const iconExpand = document.getElementById("iconExpand");

        toggleBtn.addEventListener("click", () => {
            const isVisible = !accountList.classList.contains("hidden");
            accountList.classList.toggle("hidden");

            // Update text and icon
            toggleText.textContent = isVisible ? "Show more accounts" : "Hide more accounts";
            iconExpand.classList.toggle("rotate-180", !isVisible);

            // Toggle bottom radius of the button
            if (!isVisible) {
                toggleBtn.classList.remove("rounded-b-3xl");
            } else {
                toggleBtn.classList.add("rounded-b-3xl");
            }
        });

    </script>

    <script src="{% static "JS/index.js" %}"></script>
    <script src="{% static "JS/NewGem.js" %}"></script>
    <script src="{% static "JS/dropdown.js" %}"></script>
</body>

</html>